<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- styles -->
    <link type="text/css" href="../css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" href="../css/style.css" rel="stylesheet">
    <!-- js links -->
    <script type="text/javascript" src="../js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="../js/materialize.min.js"></script>
    <title>Fish Pond</title>
    <!-- link to manifest -->
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#FFE1C4">
</head>

<body>
    <div class="page-content">
        <!-- HEADER -->
        <div class="head container">
            <ul id="top-bar">
                <li>
                    <h5 class="grey-text text-lighten-4"><b>FishPond</b></h5>
                </li>
                <li>
                    <div id="logout">
                        <i class="btn-flat material-icons grey-text text-lighten-4">exit_to_app</i>
                    </div>
                </li>
            </ul>
        </div>
        <!-- CONTENT -->
        <div class="content container">
            <div id="profile-data" class="container center">
                
            </div>
            <h6 class="center white-text">User Fish</h6>
            <div id="user-fish" class="container">
            </div>
        </div>
        <!-- FOOTER -->
        <div class="end z-depth-0">
            <div class="container">
                <div class="row">
                    <ul class="center">
                        <li class="col s3">
                            <a href="./main.html" class="btn-floating cyan waves-effect"><i
                                    class="material-icons">home</i></a>
                        </li>
                        <li class="col s3">
                            <a href="./feed.html" class="btn-floating cyan waves-effect"><i
                                    class="material-icons">home</i></a>
                        </li>
                        <li class="col s3">
                            <a class="btn-floating disabled cyan waves-effect"><i
                                    class="material-icons">chat_bubble</i></a>
                        </li>
                        <li class="col s3">
                            <a href="./profile.html" class="btn-floating disabled cyan waves-effect"><i
                                    class="material-icons">account_circle</i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-auth.js"></script>

    <script src="../js/app.js"></script>
    <script src="../js/db.js"></script>
    <!-- <script src="../js/ui.js"></script> -->
    <script src="../js/fish.js"></script>
</body>
<script>

    $(document).ready(() => {
        var user = $.parseJSON(sessionStorage.user);
        db.collection('users').doc(user.uid).get().then(snapshot =>{
            console.log(snapshot.data());
            // var fname = snapshot.data().first_name, lname = snapshot.data().last_name;
            var name = snapshot.data().first_name + " " + snapshot.data().last_name;
            // fname = fname.replace(fname[0], fname[0].toUpperCase());
            // lname = lname.replace(lname[0], lname[0].toUpperCase()); 
            for(var x = 0; x < name.length; x++){
                name = name.replace(name[x], name[x].toUpperCase());
            }
            const html = `
                <img src="../img/fish.png" class="responsive-img circle z-depth-1">
                <p><b>${name}</b></p>
                <h4><i>${snapshot.data().username}</i></h4>
            `;
            getFish("parent", snapshot.data().username);
            $("#profile-data").append(html);
        })
    });

</script>

</html>